# Справочник по тарифам CDEK для сборного груза

## Дата обновления: 26 декабря 2025

## Основные тарифы

### Тариф 751 - "Сборный груз склад-склад"

**Назначение:** Доставка сборного груза до склада/ПВЗ

**Режим доставки:** Склад-склад (mode 4)

**Варианты использования:**

1. **Доставка до ПВЗ:**
   - Используйте параметр `delivery_point` с кодом ПВЗ
   - ✅ Работает при создании заказа
   - ✅ Работает в калькуляторе (требует указания склада)

2. **Доставка до склада:**
   - Используйте параметр `delivery_point` с кодом склада
   - ✅ Работает при создании заказа

**Ограничения:**
- Требует указания склада/ПВЗ в городе отправления и/или получения
- В калькуляторе может не работать без указания склада

### Тариф 750 - "Сборный груз склад-дверь"

**Назначение:** Доставка сборного груза до двери получателя

**Режим доставки:** Склад-дверь (mode 3)

**Варианты использования:**

1. **Доставка до двери:**
   - Используйте параметр `to_location.address` с адресом доставки
   - ✅ Работает при создании заказа
   - ❌ Не работает в тестовом API калькуляторе (ограничение тестового API)

**Ограничения:**
- Не работает в тестовом API калькуляторе
- Работает только при создании заказа

## Рекомендации по использованию

### Для виджета расчета стоимости:

1. **Доставка до ПВЗ:**
   - Используйте тариф **751**
   - Укажите `delivery_point` (код ПВЗ)
   - Если ПВЗ не указан, бэкенд автоматически найдет подходящий ПВЗ с `is_ltl: true`

2. **Доставка до двери:**
   - Используйте тариф **750**
   - Укажите `to_location.address` (адрес доставки)
   - ⚠️ В тестовом API калькулятор может не работать, но заказ создастся успешно

### Для создания заказа:

Оба тарифа работают при создании заказа:
- **751** - для доставки до ПВЗ/склада
- **750** - для доставки до двери

## Примеры использования

### Пример 1: Доставка до ПВЗ (тариф 751)

```json
{
  "type": 1,
  "number": "ORDER-123",
  "tariff_code": 751,
  "shipment_point": "MOS4",
  "delivery_point": "NSK1",
  "recipient": {
    "name": "Иван Иванов",
    "phones": [{"number": "+79991234567"}]
  },
  "packages": [{
    "number": "PACK-1",
    "weight": 50000,
    "length": 50,
    "width": 50,
    "height": 50
  }]
}
```

### Пример 2: Доставка до двери (тариф 750)

```json
{
  "type": 1,
  "number": "ORDER-124",
  "tariff_code": 750,
  "shipment_point": "MOS4",
  "to_location": {
    "code": 270,
    "address": "г. Новосибирск, ул. Ленина, д. 1, кв. 10"
  },
  "recipient": {
    "name": "Петр Петров",
    "phones": [{"number": "+79991234568"}]
  },
  "packages": [{
    "number": "PACK-2",
    "weight": 50000,
    "length": 50,
    "width": 50,
    "height": 50
  }]
}
```

## Важные замечания

1. **Тестовый API:**
   - Тариф 750 не работает в калькуляторе тестового API
   - Оба тарифа работают при создании заказа в тестовом API

2. **Продакшн API:**
   - Оба тарифа должны работать и в калькуляторе, и при создании заказа

3. **Автоматический поиск ПВЗ:**
   - Бэкенд автоматически находит ПВЗ с `is_ltl: true` для тарифа 751
   - Это упрощает использование виджета

## Ссылки

- [Документация CDEK API](https://api-docs.cdek.ru/)
- [Документация виджета CDEK](https://github.com/cdek-it/widget/wiki)

